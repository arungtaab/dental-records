<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=yes, viewport-fit=cover">
    <title>Student Dental Records / Tala ng Ngipin ng Mag-aaral</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü¶∑</text></svg>">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                Student Dental Records
                <small>Tala ng Ngipin ng Mag-aaral</small>
            </h1>
        </div>

        <!-- Connection Status -->
        <div id="connectionStatus" class="status online">
            <span id="statusIcon">‚úÖ</span>
            <span id="statusText">You are online / Online ka</span>
            <span id="pendingCount" class="pending-count hidden">0</span>
        </div>

        <!-- Main Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab(1)">
                <span class="en">üîç Search</span>
                <span class="tl">Maghanap</span>
            </button>
            <button class="tab" onclick="switchTab(2)">
                <span class="en">ü¶∑ Dental Exam</span>
                <span class="tl">Eksaminasyon</span>
            </button>
            <button class="tab" onclick="switchTab(3)">
                <span class="en">üìã Records</span>
                <span class="tl">Mga Tala</span>
            </button>
        </div>

        <!-- Content Area -->
        <div class="content">
            <!-- Tab 1: Search / New Student -->
            <div id="tab1" class="tab-content">
                <div class="search-section">
                    <h3>
                        <span class="en">üîç Search Student / Maghanap ng Mag-aaral</span>
                    </h3>
                    
                    <div class="search-grid">
                        <div class="form-group">
                            <label>
                                <span class="en">Complete Name</span>
                                <span class="tl">Buong Pangalan</span>
                            </label>
                            <input type="text" id="searchName" placeholder="Enter full name">
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">Date of Birth</span>
                                <span class="tl">Petsa ng Kapanganakan</span>
                            </label>
                            <input type="text" id="searchDob" placeholder="DD/MM/YYYY">
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">School</span>
                                <span class="tl">Paaralan</span>
                            </label>
                            <select id="searchSchool">
                                <option value="">Select / Pumili</option>
                                <option value="JCES">JCES</option>
                                <option value="Boctol">Boctol Elementary School</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn" onclick="searchStudent()">
                            <span>üîç</span>
                            <span class="en">Search</span>
                            <span class="tl">Hanapin</span>
                        </button>
                        <button class="btn btn-success" onclick="newStudent()">
                            <span>üÜï</span>
                            <span class="en">New Student</span>
                            <span class="tl">Bagong Mag-aaral</span>
                        </button>
                    </div>

                    <div id="searchStatus" class="hidden"></div>
                    <div id="searchLoading" class="loading hidden">
                        <div class="spinner"></div>
                        <p>Searching / Naghahanap...</p>
                    </div>
                </div>

                <!-- Student Info Form (for new/edit) -->
                <div id="studentForm" class="student-card hidden">
                    <h3>
                        <span class="en">üìù Student Information</span>
                        <span class="tl">Impormasyon ng Mag-aaral</span>
                    </h3>
                    
                    <form id="studentInfoForm">
                        <div class="info-grid">
                            <div class="form-group">
                                <label>
                                    <span class="en">Complete Name</span>
                                    <span class="tl">Buong Pangalan</span>
                                </label>
                                <input type="text" id="editName" required>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Sex</span>
                                    <span class="tl">Kasarian</span>
                                </label>
                                <select id="editSex">
                                    <option value="">Select / Pumili</option>
                                    <option value="Male / Lalaki">Male / Lalaki</option>
                                    <option value="Female / Babae">Female / Babae</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Age</span>
                                    <span class="tl">Edad</span>
                                </label>
                                <input type="text" id="editAge">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Date of Birth</span>
                                    <span class="tl">Petsa ng Kapanganakan</span>
                                </label>
                                <input type="text" id="editDob" required placeholder="DD/MM/YYYY">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Address</span>
                                    <span class="tl">Tirahan</span>
                                </label>
                                <input type="text" id="editAddress">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">School</span>
                                    <span class="tl">Paaralan</span>
                                </label>
                                <select id="editSchool" required>
                                    <option value="">Select / Pumili</option>
                                    <option value="JCES">JCES</option>
                                    <option value="Boctol">Boctol Elementary School</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Parent/Guardian</span>
                                    <span class="tl">Magulang/Tagapag-alaga</span>
                                </label>
                                <input type="text" id="editParent">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Contact Number</span>
                                    <span class="tl">Numero ng Telepono</span>
                                </label>
                                <input type="text" id="editContact">
                            </div>
                        </div>
                        
                        <h4>
                            <span class="en">Medical History</span>
                            <span class="tl">Kasaysayang Medikal</span>
                        </h4>
                        
                        <div class="info-grid">
                            <div class="form-group">
                                <label>
                                    <span class="en">Systemic Conditions</span>
                                    <span class="tl">Sistemikong Karamdaman</span>
                                </label>
                                <input type="text" id="editSystemic" placeholder="e.g., Asthma, Diabetes">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Food/Environment Allergies</span>
                                    <span class="tl">Allergy sa Pagkain/Kapaligiran</span>
                                </label>
                                <input type="text" id="editFoodAllergy" placeholder="e.g., Dust, Seafood">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Medicine Allergies</span>
                                    <span class="tl">Allergy sa Gamot</span>
                                </label>
                                <input type="text" id="editMedAllergy" placeholder="e.g., Penicillin">
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button type="button" class="btn btn-success" onclick="saveStudentInfo()">
                                <span>üíæ</span>
                                <span class="en">Save Student Info</span>
                                <span class="tl">I-save ang Impormasyon</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tab 2: Dental Exam -->
            <div id="tab2" class="tab-content hidden">
                <div class="student-card">
                    <h3>
                        <span class="en">ü¶∑ Dental Examination</span>
                        <span class="tl">Eksaminasyon sa Ngipin</span>
                    </h3>
                    
                    <div id="selectedStudent" class="info-item" style="margin-bottom: 15px;">
                        <span class="en">Selected Student:</span>
                        <span class="tl">Napiling Mag-aaral:</span>
                        <strong id="selectedStudentName">None / Wala</strong>
                    </div>
                    
                    <!-- FDI Interactive Chart -->
                    <div class="fdi-chart">
                        <div class="chart-title">
                            <span class="en">ü¶∑ FDI Tooth Chart</span>
                            <span class="tl">Tsart ng Ngipin</span>
                        </div>
                        
                        <div class="legend">
                            <div class="legend-item"><span class="legend-color" style="background: var(--tooth-normal);"></span> N - Normal</div>
                            <div class="legend-item"><span class="legend-color" style="background: var(--tooth-decayed);"></span> O - Decayed / Sirang</div>
                            <div class="legend-item"><span class="legend-color" style="background: var(--tooth-filled);"></span> F - Filled / Pasta</div>
                            <div class="legend-item"><span class="legend-color" style="background: var(--tooth-missing);"></span> M - Missing / Wala</div>
                            <div class="legend-item"><span class="legend-color" style="background: var(--tooth-extract);"></span> X - Extract / Bubunutin</div>
                        </div>

                        <!-- Permanent Teeth -->
                        <div class="quadrant-grid">
                            <div class="quadrant">
                                <div class="quadrant-title">Upper Right (11-18)</div>
                                <div class="tooth-row" id="upperRightPerm"></div>
                            </div>
                            <div class="quadrant">
                                <div class="quadrant-title">Upper Left (21-28)</div>
                                <div class="tooth-row" id="upperLeftPerm"></div>
                            </div>
                            <div class="quadrant">
                                <div class="quadrant-title">Lower Left (31-38)</div>
                                <div class="tooth-row" id="lowerLeftPerm"></div>
                            </div>
                            <div class="quadrant">
                                <div class="quadrant-title">Lower Right (41-48)</div>
                                <div class="tooth-row" id="lowerRightPerm"></div>
                            </div>
                        </div>

                        <!-- Baby Teeth -->
                        <div class="quadrant-grid">
                            <div class="quadrant">
                                <div class="quadrant-title">Upper Right Baby (51-55)</div>
                                <div class="tooth-row" id="upperRightBaby"></div>
                            </div>
                            <div class="quadrant">
                                <div class="quadrant-title">Upper Left Baby (61-65)</div>
                                <div class="tooth-row" id="upperLeftBaby"></div>
                            </div>
                            <div class="quadrant">
                                <div class="quadrant-title">Lower Left Baby (71-75)</div>
                                <div class="tooth-row" id="lowerLeftBaby"></div>
                            </div>
                            <div class="quadrant">
                                <div class="quadrant-title">Lower Right Baby (81-85)</div>
                                <div class="tooth-row" id="lowerRightBaby"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Dental Exam Form -->
                    <form id="dentalExamForm">
                        <div class="info-grid">
                            <div class="form-group">
                                <label>
                                    <span class="en">Tooth Extraction (FDI)</span>
                                    <span class="tl">Pagbunot ng Ngipin</span>
                                </label>
                                <input type="text" id="toothExtraction" readonly placeholder="Click teeth above">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Tooth Filling (FDI)</span>
                                    <span class="tl">Pagpasta ng Ngipin</span>
                                </label>
                                <input type="text" id="toothFilling" readonly placeholder="Click teeth above">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Cleaning (FDI)</span>
                                    <span class="tl">Paglilinis</span>
                                </label>
                                <input type="text" id="toothCleaning" placeholder="e.g., 11-18, 21-28">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Fluoride</span>
                                </label>
                                <select id="fluoride">
                                    <option value="">Select</option>
                                    <option value="Oo">Oo / Yes</option>
                                    <option value="Hindi">Hindi / No</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Dental Consultations</span>
                                    <span class="tl">Konsultasyon</span>
                                </label>
                                <select id="dentalConsult">
                                    <option value="">Select</option>
                                    <option value="Oo">Oo / Yes</option>
                                    <option value="Hindi">Hindi / No</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Severe Cavities</span>
                                    <span class="tl">Malubhang Karies</span>
                                </label>
                                <select id="severeCavities">
                                    <option value="">Select</option>
                                    <option value="Oo">Oo / Yes</option>
                                    <option value="Hindi">Hindi / No</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">Oral Exam Notes</span>
                                <span class="tl">Mga Tala ng Pagsusuri</span>
                            </label>
                            <textarea id="oralNotes" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">Cleaning Notes</span>
                                <span class="tl">Mga Tala sa Paglilinis</span>
                            </label>
                            <textarea id="cleaningNotes" rows="2"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">Remarks</span>
                                <span class="tl">Mga Puna</span>
                            </label>
                            <textarea id="remarks" rows="3"></textarea>
                        </div>
                        
                        <div class="btn-group">
                            <button type="submit" class="btn btn-success">
                                <span>üíæ</span>
                                <span class="en">Save Dental Record</span>
                                <span class="tl">I-save ang Tala</span>
                            </button>
                        </div>
                    </form>
                    
                    <div id="saveStatus" class="hidden"></div>
                </div>
            </div>

            <!-- Tab 3: Records -->
            <div id="tab3" class="tab-content hidden">
                <div class="student-card">
                    <h3>
                        <span class="en">üìã Student Records</span>
                        <span class="tl">Mga Tala ng Mag-aaral</span>
                    </h3>
                    
                    <div class="form-group">
                        <label>
                            <span class="en">Search Student</span>
                            <span class="tl">Maghanap ng Mag-aaral</span>
                        </label>
                        <input type="text" id="recordSearch" placeholder="Type name to search...">
                    </div>
                    
                    <div id="studentsList" class="records-list"></div>
                    <div id="studentRecords" class="records-list" style="margin-top: 15px;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast hidden"></div>
    <script src="app.js"></script>
</body>
</html>
