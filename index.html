<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>School Tools Dashboard / Paaralan Tools Dashboard</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --primary: #16697a;
            --secondary: #489fb5;
            --light: #82c0cc;
            --background: #ede7e3;
            --accent: #ffa62b;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --tooth-normal: #82c0cc;
            --tooth-decayed: #dc3545;
            --tooth-filled: #28a745;
            --tooth-missing: #6c757d;
            --tooth-extract: #ffa62b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: var(--primary);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header h1 small {
            font-size: 0.6em;
            display: block;
            opacity: 0.9;
            margin-top: 5px;
        }

        .tabs {
            display: flex;
            background: var(--background);
            border-bottom: 2px solid var(--light);
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 150px;
            padding: 18px 15px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: var(--primary);
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab:hover {
            background: rgba(130, 192, 204, 0.2);
        }

        .tab.active {
            border-bottom: 3px solid var(--accent);
            background: white;
        }

        .tab span.en {
            display: block;
        }

        .tab span.tl {
            display: block;
            font-size: 0.85em;
            opacity: 0.8;
        }

        .content {
            padding: 25px;
            min-height: 600px;
        }

        /* Search Section */
        .search-section {
            background: var(--background);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--primary);
        }

        label .en {
            display: block;
        }

        label .tl {
            display: block;
            font-size: 0.9em;
            opacity: 0.8;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--light);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(72, 159, 181, 0.1);
        }

        .btn {
            background: var(--primary);
            color: white;
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-warning {
            background: var(--warning);
            color: #000;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Student Info Card */
        .student-card {
            background: white;
            border: 2px solid var(--light);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .student-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
        }

        .student-name {
            font-size: 1.5em;
            color: var(--primary);
            font-weight: bold;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .info-item {
            background: var(--background);
            padding: 12px;
            border-radius: 8px;
        }

        .info-label {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .info-label .en, .info-label .tl {
            display: inline;
        }

        .info-label .en::after {
            content: " / ";
        }

        /* FDI Chart */
        .fdi-chart {
            background: white;
            border: 2px solid var(--light);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .chart-title {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
        }

        .quadrant-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .quadrant {
            background: var(--background);
            padding: 15px;
            border-radius: 10px;
        }

        .quadrant-title {
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .tooth-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 8px 0;
            flex-wrap: wrap;
        }

        .tooth-btn {
            width: 50px;
            height: 50px;
            border: 2px solid var(--primary);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .tooth-btn .number {
            font-size: 14px;
        }

        .tooth-btn .status {
            font-size: 18px;
            line-height: 1;
        }

        .tooth-btn.normal { background: var(--tooth-normal); color: white; }
        .tooth-btn.decayed { background: var(--tooth-decayed); color: white; }
        .tooth-btn.filled { background: var(--tooth-filled); color: white; }
        .tooth-btn.missing { background: var(--tooth-missing); color: white; }
        .tooth-btn.extract { background: var(--tooth-extract); color: white; }

        .legend {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
            padding: 15px;
            background: var(--background);
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 25px;
            height: 25px;
            border-radius: 5px;
        }

        /* Status Messages */
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }

        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        .warning { background: #fff3cd; color: #856404; }

        /* Previous Records */
        .records-list {
            max-height: 300px;
            overflow-y: auto;
            border: 2px solid var(--light);
            border-radius: 8px;
            padding: 10px;
        }

        .record-item {
            background: var(--background);
            padding: 12px;
            margin: 8px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .record-item:hover {
            background: var(--light);
        }

        .record-date {
            font-weight: bold;
            color: var(--primary);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .quadrant-grid {
                grid-template-columns: 1fr;
            }
            
            .tooth-btn {
                width: 40px;
                height: 40px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                School Tools Dashboard
                <small>Paaralan Tools Dashboard</small>
            </h1>
            <p>Complete management system / Kompletong sistema ng pamamahala</p>
        </div>

        <!-- Tabs / Mga Tab -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab(1)">
                <span class="en">ü¶∑ Dental Records</span>
                <span class="tl">üìã Tala ng Ngipin</span>
            </button>
            <button class="tab" onclick="switchTab(2)">
                <span class="en">üìä Tool 2</span>
                <span class="tl">üõ†Ô∏è Kasangkapan 2</span>
            </button>
            <button class="tab" onclick="switchTab(3)">
                <span class="en">üìà Tool 3</span>
                <span class="tl">üìä Kasangkapan 3</span>
            </button>
            <button class="tab" onclick="switchTab(4)">
                <span class="en">üéØ Tool 4</span>
                <span class="tl">üéØ Kasangkapan 4</span>
            </button>
        </div>

        <!-- Content Area / Lugar ng Nilalaman -->
        <div class="content">
            <!-- Tab 1: Dental Records -->
            <div id="tab1" class="tab-content">
                <!-- Your Dental Records System Goes Here -->
                <div class="search-section">
                    <h3>
                        <span class="en">üîç Search Student / Maghanap ng Mag-aaral</span>
                    </h3>
                    
                    <div class="search-grid">
                        <div class="form-group">
                            <label>
                                <span class="en">Complete Name</span>
                                <span class="tl">Buong Pangalan</span>
                            </label>
                            <input type="text" id="searchName" placeholder="Enter full name / Ilagay ang buong pangalan">
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">Date of Birth</span>
                                <span class="tl">Petsa ng Kapanganakan</span>
                            </label>
                            <input type="text" id="searchDob" placeholder="DD/MM/YYYY">
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">School</span>
                                <span class="tl">Paaralan</span>
                            </label>
                            <select id="searchSchool">
                                <option value="">Select / Pumili</option>
                                <option value="JCES">JCES</option>
                                <option value="Boctol">Boctol Elementary School</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn" onclick="searchStudent()">
                            <span>üîç</span>
                            <span class="en">Search / Hanapin</span>
                        </button>
                        <button class="btn btn-success" onclick="clearSearch()">
                            <span>üÜï</span>
                            <span class="en">New Record / Bagong Tala</span>
                        </button>
                    </div>
                </div>

                <!-- Student Info / Impormasyon ng Mag-aaral -->
                <div id="studentInfo" class="student-card hidden">
                    <div class="student-header">
                        <span class="student-name" id="displayName"></span>
                        <span class="student-age" id="displayAge"></span>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">Date of Birth</span>
                                <span class="tl">Petsa ng Kapanganakan</span>
                            </div>
                            <div id="displayDob"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">Sex / Kasarian</span>
                            </div>
                            <div id="displaySex"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">School / Paaralan</span>
                            </div>
                            <div id="displaySchool"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">Parent/Guardian</span>
                                <span class="tl">Magulang/Tagapag-alaga</span>
                            </div>
                            <div id="displayParent"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">Contact / Kontak</span>
                            </div>
                            <div id="displayContact"></div>
                        </div>
                    </div>

                    <!-- Medical History / Kasaysayang Medikal -->
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">Systemic Conditions</span>
                                <span class="tl">Sistemikong Karamdaman</span>
                            </div>
                            <div id="displaySystemic"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">Food/Environment Allergies</span>
                                <span class="tl">Allergy sa Pagkain/Kapaligiran</span>
                            </div>
                            <div id="displayFoodAllergy"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <span class="en">Medicine Allergies</span>
                                <span class="tl">Allergy sa Gamot</span>
                            </div>
                            <div id="displayMedAllergy"></div>
                        </div>
                    </div>
                </div>

                <!-- FDI Interactive Chart -->
                <div class="fdi-chart">
                    <div class="chart-title">
                        <span class="en">ü¶∑ FDI Tooth Chart / Tsart ng Ngipin</span>
                    </div>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--tooth-normal);"></div>
                            <span class="en">Normal</span>
                            <span class="tl">Normal</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--tooth-decayed);"></div>
                            <span class="en">Decayed / Sirang</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--tooth-filled);"></div>
                            <span class="en">Filled / Pasta</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--tooth-missing);"></div>
                            <span class="en">Missing / Wala</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--tooth-extract);"></div>
                            <span class="en">For Extraction</span>
                            <span class="tl">Bubunutin</span>
                        </div>
                    </div>

                    <!-- Permanent Teeth / Permanenteng Ngipin -->
                    <div class="quadrant-grid">
                        <!-- Upper Right -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Upper Right (11-18)</span>
                                <span class="tl">Kanan Itaas</span>
                            </div>
                            <div class="tooth-row" id="upperRightPerm"></div>
                        </div>
                        
                        <!-- Upper Left -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Upper Left (21-28)</span>
                                <span class="tl">Kaliwa Itaas</span>
                            </div>
                            <div class="tooth-row" id="upperLeftPerm"></div>
                        </div>
                        
                        <!-- Lower Left -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Lower Left (31-38)</span>
                                <span class="tl">Kaliwa Ibaba</span>
                            </div>
                            <div class="tooth-row" id="lowerLeftPerm"></div>
                        </div>
                        
                        <!-- Lower Right -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Lower Right (41-48)</span>
                                <span class="tl">Kanan Ibaba</span>
                            </div>
                            <div class="tooth-row" id="lowerRightPerm"></div>
                        </div>
                    </div>

                    <!-- Baby Teeth / Baby Teeth -->
                    <div class="quadrant-grid">
                        <!-- Upper Right Baby -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Upper Right Baby (51-55)</span>
                                <span class="tl">Kanan Itaas Baby</span>
                            </div>
                            <div class="tooth-row" id="upperRightBaby"></div>
                        </div>
                        
                        <!-- Upper Left Baby -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Upper Left Baby (61-65)</span>
                                <span class="tl">Kaliwa Itaas Baby</span>
                            </div>
                            <div class="tooth-row" id="upperLeftBaby"></div>
                        </div>
                        
                        <!-- Lower Left Baby -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Lower Left Baby (71-75)</span>
                                <span class="tl">Kaliwa Ibaba Baby</span>
                            </div>
                            <div class="tooth-row" id="lowerLeftBaby"></div>
                        </div>
                        
                        <!-- Lower Right Baby -->
                        <div class="quadrant">
                            <div class="quadrant-title">
                                <span class="en">Lower Right Baby (81-85)</span>
                                <span class="tl">Kanan Ibaba Baby</span>
                            </div>
                            <div class="tooth-row" id="lowerRightBaby"></div>
                        </div>
                    </div>
                </div>

                <!-- Dental Exam Form -->
                <div class="student-card">
                    <h3>
                        <span class="en">üìù Dental Examination / Eksaminasyon sa Ngipin</span>
                    </h3>
                    
                    <form id="dentalForm">
                        <div class="info-grid">
                            <div class="form-group">
                                <label>
                                    <span class="en">Tooth Extraction</span>
                                    <span class="tl">Pagbunot ng Ngipin</span>
                                </label>
                                <input type="text" id="toothExtraction" readonly placeholder="Click teeth above / Pindutin ang ngipin sa itaas">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Tooth Filling</span>
                                    <span class="tl">Pagpasta ng Ngipin</span>
                                </label>
                                <input type="text" id="toothFilling" readonly placeholder="Click teeth above / Pindutin ang ngipin sa itaas">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Fluoride</span>
                                </label>
                                <select id="fluoride">
                                    <option value="">Select / Pumili</option>
                                    <option value="Oo">Oo / Yes</option>
                                    <option value="Hindi">Hindi / No</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span class="en">Dental Consultations</span>
                                    <span class="tl">Konsultasyon sa Ngipin</span>
                                </label>
                                <select id="dentalConsult">
                                    <option value="">Select / Pumili</option>
                                    <option value="Oo">Oo / Yes</option>
                                    <option value="Hindi">Hindi / No</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">Oral Exam Notes</span>
                                <span class="tl">Mga Tala ng Pagsusuri</span>
                            </label>
                            <textarea id="oralNotes" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="en">Remarks / Mga Puna</span>
                            </label>
                            <textarea id="remarks" rows="3"></textarea>
                        </div>
                        
                        <div class="btn-group">
                            <button type="submit" class="btn btn-success">
                                <span>üíæ</span>
                                <span class="en">Save Record / I-save ang Tala</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Previous Records -->
                <div id="previousRecords" class="student-card hidden">
                    <h3>
                        <span class="en">üìã Previous Visits / Nakaraang Pagbisita</span>
                    </h3>
                    <div id="recordsList" class="records-list"></div>
                </div>
            </div>

            <!-- Tab 2: Placeholder for Tool 2 -->
            <div id="tab2" class="tab-content hidden">
                <div class="student-card" style="text-align: center; padding: 50px;">
                    <h2>üîß Tool 2 / Kasangkapan 2</h2>
                    <p style="margin: 30px 0; color: #666;">
                        <span class="en">Your second tool will go here</span><br>
                        <span class="tl">Ang iyong pangalawang kasangkapan ay ilalagay dito</span>
                    </p>
                    <div style="font-size: 4em;">‚öôÔ∏è</div>
                </div>
            </div>

            <!-- Tab 3: Placeholder for Tool 3 -->
            <div id="tab3" class="tab-content hidden">
                <div class="student-card" style="text-align: center; padding: 50px;">
                    <h2>üìä Tool 3 / Kasangkapan 3</h2>
                    <p style="margin: 30px 0; color: #666;">
                        <span class="en">Your third tool will go here</span><br>
                        <span class="tl">Ang iyong pangatlong kasangkapan ay ilalagay dito</span>
                    </p>
                    <div style="font-size: 4em;">üìà</div>
                </div>
            </div>

            <!-- Tab 4: Placeholder for Tool 4 -->
            <div id="tab4" class="tab-content hidden">
                <div class="student-card" style="text-align: center; padding: 50px;">
                    <h2>üéØ Tool 4 / Kasangkapan 4</h2>
                    <p style="margin: 30px 0; color: #666;">
                        <span class="en">Your fourth tool will go here</span><br>
                        <span class="tl">Ang iyong pang-apat na kasangkapan ay ilalagay dito</span>
                    </p>
                    <div style="font-size: 4em;">üõ†Ô∏è</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Apps Script URL
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxvPwxiSee3iDYQP49VwNA58uz85GcI4xIdcOaNoko8s9M9mMBTK8SvyDC3744HfPpvdg/exec';
        
        // Current student data
        let currentStudent = null;
        
        // Tooth status tracking
        const toothStatus = {};
        const toothCategories = {
            extraction: [],
            filling: []
        };

        // Initialize teeth
        function initTeeth() {
            const permanentTeeth = [
                // Upper
                18,17,16,15,14,13,12,11,21,22,23,24,25,26,27,28,
                // Lower
                38,37,36,35,34,33,32,31,41,42,43,44,45,46,47,48
            ];
            
            const babyTeeth = [
                55,54,53,52,51,61,62,63,64,65,
                75,74,73,72,71,81,82,83,84,85
            ];
            
            [...permanentTeeth, ...babyTeeth].forEach(tooth => {
                toothStatus[tooth] = 'N'; // N = Normal
            });
        }

        // Create tooth button
        function createToothButton(toothNumber) {
            const btn = document.createElement('button');
            btn.className = 'tooth-btn normal';
            btn.innerHTML = `<span class="number">${toothNumber}</span><span class="status">N</span>`;
            
            const statuses = ['N', 'X', 'O', 'M', 'F'];
            let statusIndex = 0;
            
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                statusIndex = (statusIndex + 1) % statuses.length;
                const newStatus = statuses[statusIndex];
                
                // Update button appearance
                btn.className = `tooth-btn ${getStatusClass(newStatus)}`;
                btn.innerHTML = `<span class="number">${toothNumber}</span><span class="status">${newStatus}</span>`;
                
                // Update tooth status
                toothStatus[toothNumber] = newStatus;
                
                // Update category lists
                updateToothCategories();
            });
            
            return btn;
        }

        function getStatusClass(status) {
            const classes = {
                'N': 'normal',
                'X': 'extract',
                'O': 'decayed',
                'M': 'missing',
                'F': 'filled'
            };
            return classes[status] || 'normal';
        }

        function updateToothCategories() {
            toothCategories.extraction = [];
            toothCategories.filling = [];
            
            Object.entries(toothStatus).forEach(([tooth, status]) => {
                if (status === 'X') toothCategories.extraction.push(tooth);
                if (status === 'F' || status === 'O') toothCategories.filling.push(tooth);
            });
            
            // Update input fields
            document.getElementById('toothExtraction').value = toothCategories.extraction.join(', ');
            document.getElementById('toothFilling').value = toothCategories.filling.join(', ');
        }

        // Populate teeth
        function populateTeeth() {
            // Permanent teeth quadrants
            document.getElementById('upperRightPerm').innerHTML = '';
            [18,17,16,15,14,13,12,11].forEach(tooth => {
                document.getElementById('upperRightPerm').appendChild(createToothButton(tooth));
            });
            
            document.getElementById('upperLeftPerm').innerHTML = '';
            [21,22,23,24,25,26,27,28].forEach(tooth => {
                document.getElementById('upperLeftPerm').appendChild(createToothButton(tooth));
            });
            
            document.getElementById('lowerLeftPerm').innerHTML = '';
            [38,37,36,35,34,33,32,31].forEach(tooth => {
                document.getElementById('lowerLeftPerm').appendChild(createToothButton(tooth));
            });
            
            document.getElementById('lowerRightPerm').innerHTML = '';
            [41,42,43,44,45,46,47,48].forEach(tooth => {
                document.getElementById('lowerRightPerm').appendChild(createToothButton(tooth));
            });
            
            // Baby teeth quadrants
            document.getElementById('upperRightBaby').innerHTML = '';
            [55,54,53,52,51].forEach(tooth => {
                document.getElementById('upperRightBaby').appendChild(createToothButton(tooth));
            });
            
            document.getElementById('upperLeftBaby').innerHTML = '';
            [61,62,63,64,65].forEach(tooth => {
                document.getElementById('upperLeftBaby').appendChild(createToothButton(tooth));
            });
            
            document.getElementById('lowerLeftBaby').innerHTML = '';
            [75,74,73,72,71].forEach(tooth => {
                document.getElementById('lowerLeftBaby').appendChild(createToothButton(tooth));
            });
            
            document.getElementById('lowerRightBaby').innerHTML = '';
            [81,82,83,84,85].forEach(tooth => {
                document.getElementById('lowerRightBaby').appendChild(createToothButton(tooth));
            });
        }

        // Tab switching
        function switchTab(tabNumber) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach((tab, index) => {
                if (index === tabNumber - 1) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Show selected tab content
            document.querySelectorAll('.tab-content').forEach((content, index) => {
                if (index === tabNumber - 1) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        }

        // Search student
        async function searchStudent() {
            const name = document.getElementById('searchName').value;
            const dob = document.getElementById('searchDob').value;
            const school = document.getElementById('searchSchool').value;
            
            if (!name || !dob || !school) {
                alert('Please fill in all search fields / Punan ang lahat ng field');
                return;
            }
            
            // Here you would call your Apps Script to search
            // For now, show mock data
            document.getElementById('studentInfo').classList.remove('hidden');
            document.getElementById('displayName').textContent = name;
            document.getElementById('displayDob').textContent = dob;
            document.getElementById('displaySchool').textContent = school;
            document.getElementById('displaySex').textContent = 'Male / Lalaki';
            document.getElementById('displayParent').textContent = 'Juan Dela Cruz';
            document.getElementById('displayContact').textContent = '09123456789';
            document.getElementById('displaySystemic').textContent = 'None / Wala';
            document.getElementById('displayFoodAllergy').textContent = 'None / Wala';
            document.getElementById('displayMedAllergy').textContent = 'Penicillin';
            
            // Show previous records
            document.getElementById('previousRecords').classList.remove('hidden');
            const recordsList = document.getElementById('recordsList');
            recordsList.innerHTML = `
                <div class="record-item">
                    <div class="record-date">2024-01-15</div>
                    <div>Extraction: 18, 28 / Filling: 16, 26</div>
                </div>
                <div class="record-item">
                    <div class="record-date">2023-11-20</div>
                    <div>Cleaning / Fluoride treatment</div>
                </div>
            `;
        }

        function clearSearch() {
            document.getElementById('searchName').value = '';
            document.getElementById('searchDob').value = '';
            document.getElementById('searchSchool').value = '';
            document.getElementById('studentInfo').classList.add('hidden');
            document.getElementById('previousRecords').classList.add('hidden');
            
            // Reset teeth
            initTeeth();
            populateTeeth();
        }

        // Form submit
        document.getElementById('dentalForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const record = {
                studentName: document.getElementById('displayName').textContent,
                school: document.getElementById('displaySchool').textContent,
                toothExtraction: document.getElementById('toothExtraction').value,
                toothFilling: document.getElementById('toothFilling').value,
                fluoride: document.getElementById('fluoride').value,
                dentalConsult: document.getElementById('dentalConsult').value,
                oralNotes: document.getElementById('oralNotes').value,
                remarks: document.getElementById('remarks').value,
                toothData: toothStatus
            };
            
            console.log('Saving record:', record);
            alert('Record saved! / Na-save ang tala!');
        });

        // Initialize on load
        window.addEventListener('load', () => {
            initTeeth();
            populateTeeth();
        });
    </script>
</body>
</html>
